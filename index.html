<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>LC Spanish Coach - Ardgillan CC</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root { --primary: #2563eb; --secondary: #db2777; --bg: #f8fafc; --text: #1e293b; }
    body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); padding: 20px; }
    .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
    
    header { text-align: center; margin-bottom: 30px; }
    h1 { margin: 0; color: var(--primary); font-size: 1.8rem; }
    .subtitle { color: #64748b; margin-top: 5px; font-size: 0.95rem; }

    .info-toggle { background: #e0f2fe; color: #0369a1; border: none; padding: 8px 15px; border-radius: 20px; font-size: 0.85rem; font-weight: 600; cursor: pointer; margin-top: 15px; display: inline-flex; align-items: center; gap: 5px; }
    .info-box { display: none; background: #f0f9ff; border: 1px solid #bae6fd; padding: 15px; border-radius: 12px; margin-bottom: 20px; text-align: left; font-size: 0.9rem; color: #334155; }

    .level-selector { display: flex; background: #f1f5f9; padding: 5px; border-radius: 12px; margin-bottom: 25px; }
    .level-btn { flex: 1; padding: 12px; border: none; border-radius: 8px; cursor: pointer; font-weight: 700; transition: 0.3s; font-size: 1rem; color: #64748b; }
    .level-btn.active { background: white; color: var(--primary); box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
    .level-btn.hl.active { color: var(--secondary); }

    .mock-btn { width: 100%; padding: 18px; margin-bottom: 25px; background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%); color: white; border: none; border-radius: 12px; font-weight: 800; font-size: 1.1rem; cursor: pointer; display: flex; justify-content: center; align-items: center; gap: 10px; box-shadow: 0 4px 15px rgba(168, 85, 247, 0.3); transition: transform 0.2s; }
    .mock-btn:hover { transform: scale(1.02); }

    .topic-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 10px; margin-bottom: 25px; }
    .topic-btn { padding: 12px; border: 1px solid #e2e8f0; border-radius: 10px; background: white; cursor: pointer; font-size: 0.85rem; font-weight: 600; text-align: center; color: #475569; transition: 0.2s; }
    .topic-btn.active { border-color: var(--primary); background: #eff6ff; color: var(--primary); transform: scale(1.02); }

    .question-card { background: #fdf2f8; border-left: 5px solid var(--secondary); padding: 25px; border-radius: 0 12px 12px 0; margin-bottom: 20px; }
    .audio-btn { margin-top: 15px; background: white; border: 1px solid #e2e8f0; padding: 8px 16px; border-radius: 50px; font-size: 0.9rem; font-weight: 600; cursor: pointer; color: var(--text); }

    textarea { width: 100%; border: 2px solid #e2e8f0; border-radius: 15px; padding: 15px; min-height: 120px; box-sizing: border-box; font-size: 1rem; margin-bottom: 15px; }

    .btn-main { width: 100%; padding: 16px; background: var(--text); color: white; border: none; border-radius: 15px; font-weight: 800; cursor: pointer; font-size: 1.1rem; }
    
    #result { margin-top: 30px; display: none; }
    .student-response-box { background: #f1f5f9; padding: 15px; border-radius: 10px; margin-bottom: 20px; border-left: 4px solid #94a3b8; font-style: italic; color: #475569; }
    .feedback-box { padding: 25px; border-radius: 15px; background: #fff; border: 1px solid #e2e8f0; }
    .feedback-lang { display: block; margin-bottom: 10px; line-height: 1.6; }
    .feedback-es { color: #1e293b; font-weight: 500; }
    .feedback-en { color: #64748b; font-style: italic; border-left: 3px solid #cbd5e1; padding-left: 10px; }
    .error-item { margin-bottom: 15px; padding: 15px; background: #fff1f2; border-radius: 10px; border-left: 4px solid #ef4444; }

    .footer-section { margin-top: 60px; padding: 40px 20px; border-top: 1px solid #e2e8f0; background: #fafafa; border-radius: 20px; text-align: center; }
    .profile-img { width: 90px; height: 90px; border-radius: 50%; object-fit: cover; border: 3px solid var(--primary); margin-bottom: 15px; }
    .bio-text { max-width: 600px; margin: 0 auto 25px auto; font-size: 0.95rem; line-height: 1.6; color: #475569; text-align: justify; }
    .contact-link { color: var(--primary); font-weight: 600; text-decoration: none; margin-top: 10px; display: inline-block; }
    .revolut-btn { background: #000; color: white; text-decoration: none; padding: 14px 28px; border-radius: 50px; font-weight: 700; display: inline-flex; align-items: center; gap: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.2); }
  </style>
</head>
<body>

<div class="container">
  <header>
  <h1 style="color: var(--primary); font-size: 2.2rem; margin-bottom: 5px;">LanguagePrep Ireland</h1>
  <p class="subtitle" style="font-weight: 600; color: var(--secondary);">Module: Leaving Cert Spanish Oral</p>
  
  <button class="info-toggle" onclick="toggleInfo()">‚ÑπÔ∏è Instructions & Tips</button>
  
  <div id="infoBox" class="info-box">
    <strong>Instructions / Instrucciones:</strong>
    <ul>
      <li>üó£Ô∏è <strong>Keyboard:</strong> Add the "Spanish" keyboard in your device settings for voice typing.</li>
      <li>üéì <strong>Focus:</strong> This tool is specifically designed for the Leaving Certificate Oral Exam.</li>
      <li>üé≤ <strong>Mock Exam:</strong> Practice with 5 random questions (General + Past + Future/Cond).</li>
    </ul>
  </div>
</header>

  <div class="level-selector">
    <button class="level-btn active" id="btnOL" onclick="setLevel('OL')">Ordinary Level</button>
    <button class="level-btn hl" id="btnHL" onclick="setLevel('HL')">Higher Level</button>
  </div>

  <button class="mock-btn" onclick="startMockExam()">üé≤ Start Mock Exam (5 Questions)</button>
  <div class="topic-grid" id="topicGrid"></div>

  <div id="exerciseArea" style="display:none;">
    <div class="question-card">
      <div id="qDisplay" style="font-weight: 700;"></div>
      <button class="audio-btn" onclick="speakText()">üîä Listen</button>
    </div>
    <textarea id="userInput" placeholder="Type or use your microphone..."></textarea>
    <button class="btn-main" id="btnAction" onclick="analyze()">‚ú® Evaluate Answer</button>
  </div>

  <div id="result">
    <div class="student-response-box"><strong>You said:</strong> <span id="userResponseText"></span></div>
    <div class="feedback-box">
      <div id="scoreDisplay" style="font-size: 1.8rem; font-weight: 800; margin-bottom: 15px;"></div>
      <div class="feedback-lang feedback-es" id="fbES"></div>
      <div class="feedback-lang feedback-en" id="fbEN"></div>
      <hr style="margin: 20px 0; border: 0; border-top: 1px solid #e2e8f0;">
      <div id="errorsList"></div>
    </div>
    <button class="btn-main" style="margin-top:20px; background:#e2e8f0; color:var(--text);" onclick="resetApp()">üîÑ Try another topic</button>
  </div>

    <div class="footer-section">
  <img src="david.PNG" alt="David Mart√≠n" class="profile-img" onerror="this.src='https://cdn-icons-png.flaticon.com/512/3135/3135715.png'">
  
  <h3 style="margin: 0 0 5px 0;">David Mart√≠n</h3>
  <p style="margin: 0 0 20px 0; font-size: 0.9rem; color: #64748b;">Spanish Teacher at <strong>Ardgillan Community College</strong>.</p>
  
  <div class="bio-text">
    <p><em>As a teacher, my goal is to create innovative tools through <strong>LanguagePrep Ireland</strong> to help students excel in their Leaving Cert exams using technology responsibly and effectively.</em></p>
    <p><em>Mi objetivo es crear recursos innovadores que fomenten un uso responsable y eficiente de la tecnolog√≠a en la preparaci√≥n de los ex√°menes de Leaving Cert.</em></p>
  </div>

  <a href="https://revolut.me/davidkhy4/pocket/TbT6B5Grkq" target="_blank" class="revolut-btn">‚òï Support this Project</a>
  
  <div class="disclaimer" style="margin-top: 25px; font-size: 0.9rem; line-height: 1.6; color: #475569;">
    <p>
      <strong>English:</strong> All resources are, and will always be, 100% free. If this tool has been useful to you and you wish to support the creation of more modules (other languages or JC), your support is essential to keep the project moving forward.
    </p>
    <p>
      <strong>Espa√±ol:</strong> Todos estos recursos son y siempre ser√°n gratuitos. Si esta herramienta te ha resultado √∫til y quieres apoyar la creaci√≥n de nuevos m√≥dulos para el LC, tu ayuda es esencial para que este proyecto contin√∫e.
    </p>
  </div>

  <p style="font-size: 0.85rem; margin-top: 25px; color: #64748b;">
    Suggestions or questions? Contact me at:<br>
    <a href="mailto:languageprepireland@gmail.com" class="contact-link" style="color: var(--primary); font-weight: bold; text-decoration: none;">languageprepireland@gmail.com</a>
  </p>
</div>
  
<script>
// CLAVES
const parteA = "AIzaSyASf_PIq7es0iPVt"; 
const parteB = "VUMt8Kn1Ll3qSpQQxg"; 
const API_KEY = parteA + parteB;

let currentLevel = 'OL';
let currentTopic = null;
let isMockExam = false; 

// üëá DATOS (Temas extra√≠dos de tus Words - LISTA COMPLETA 15 TEMAS)
const DATA = [
  { title: "1. Yo mismo", OL: "¬øC√≥mo te llamas? ¬øCu√°ndo es tu cumplea√±os? ¬øPuedes describirte f√≠sicamente?", HL: "H√°blame de ti. Describe tu personalidad (virtudes y defectos) y tu f√≠sico." },
  { title: "2. Mi familia", OL: "¬øCu√°ntas personas hay en tu familia? ¬øTienes hermanos? ¬øEres hijo √∫nico?", HL: "H√°blame de tu familia. ¬øC√≥mo son tus padres y hermanos? ¬øTe llevas bien con ellos?" },
  { title: "3. Mis amigos", OL: "¬øTienes muchos amigos? ¬øC√≥mo se llama tu mejor amigo/a?", HL: "H√°blame de tu mejor amigo. ¬øTen√©is los mismos intereses? ¬øPor qu√© es tu mejor amigo?" },
  { title: "4. Mi casa", OL: "¬øVives en una casa o en un piso? ¬øC√≥mo es tu dormitorio?", HL: "Describe tu casa. ¬øQu√© es lo que m√°s te gusta y lo que menos te gusta de tu hogar?" },
  { title: "5. Mi barrio", OL: "¬øC√≥mo es tu barrio? ¬øHay un parque o tiendas?", HL: "H√°blame de tu barrio. ¬øHay problemas sociales? ¬øQu√© instalaciones hay para los j√≥venes?" },
  { title: "6. Mi pueblo/ciudad", OL: "¬øVives en el campo o en la ciudad? ¬øTe gusta tu pueblo?", HL: "H√°blame de tu pueblo o ciudad. ¬øPrefieres la vida urbana o la rural? Justifica tu respuesta." },
  { title: "7. Mi colegio", OL: "¬øC√≥mo es tu colegio? ¬øEs mixto? ¬øLlevas uniforme?", HL: "H√°blame de tu instituto. ¬øQu√© opinas de las normas y del uniforme?" },
  { title: "8. Mis asignaturas", OL: "¬øQu√© asignaturas estudias? ¬øCu√°l es tu favorita?", HL: "H√°blame de tus asignaturas. ¬øCrees que el sistema educativo prepara bien para la vida?" },
  { title: "9. Rutina diaria", OL: "¬øA qu√© hora te levantas? ¬øQu√© haces despu√©s del colegio?", HL: "Describe tu rutina diaria. ¬øTe resulta dif√≠cil compaginar el estudio con el tiempo libre?" },
  { title: "10. Pasatiempos", OL: "¬øQu√© haces en tus ratos libres? ¬øTe gusta el deporte?", HL: "H√°blame de tus aficiones. ¬øPor qu√© es importante tener pasatiempos para la salud mental?" },
  { title: "11. Tareas dom√©sticas", OL: "¬øAyudas en casa? ¬øHaces tu cama?", HL: "H√°blame de las tareas del hogar. ¬øCrees que el reparto de tareas es justo en tu casa?" },
  { title: "12. Vacaciones", OL: "¬øQu√© hiciste el verano pasado? ¬øHas estado alguna vez en Espa√±a?", HL: "H√°blame de tus vacaciones. ¬øPrefieres quedarte en Irlanda o viajar al extranjero? ¬øPor qu√©?" },
  { title: "13. Planes de Futuro", OL: "¬øQu√© vas a hacer el a√±o que viene? ¬øQuieres ir a la universidad?", HL: "H√°blame de tus planes para el futuro. ¬øQu√© carrera te gustar√≠a estudiar y por qu√©?" },
  // üëá LOS DOS NUEVOS
  { title: "14. Fin de semana pasado", OL: "¬øQu√© hiciste el fin de semana pasado? ¬øSaliste con tus amigos?", HL: "H√°blame de lo que hiciste el fin de semana pasado. ¬øHiciste algo especial o te quedaste en casa?" },
  { title: "15. Pr√≥ximo fin de semana", OL: "¬øQu√© vas a hacer el fin de semana que viene? ¬øVas a estudiar?", HL: "H√°blame de tus planes para el pr√≥ximo fin de semana. ¬øTienes pensado salir o tienes que estudiar?" }
];
  
const PAST_QUESTIONS = {
    OL: ["¬øQu√© hiciste el fin de semana pasado?", "¬øAd√≥nde fuiste el verano pasado?", "¬øQu√© hiciste ayer despu√©s del colegio?"],
    HL: ["H√°blame de lo que hiciste el fin de semana pasado.", "Descr√≠beme tus √∫ltimas vacaciones.", "Cu√©ntame una experiencia pasada memorable."]
};

const FUTURE_QUESTIONS = {
    OL: ["¬øQu√© vas a hacer este fin de semana?", "¬øQu√© planes tienes para el pr√≥ximo verano?", "¬øQu√© har√°s cuando termines el colegio?"],
    HL: ["¬øCu√°les son tus planes para el futuro?", "Si fueras rico o famoso, ¬øqu√© har√≠as?", "Si fueras presidente de Irlanda, ¬øqu√© cambiar√≠as?"]
};

function toggleInfo() { const b = document.getElementById('infoBox'); b.style.display = b.style.display === 'block' ? 'none' : 'block'; }
function setLevel(lvl) { currentLevel = lvl; document.getElementById('btnOL').classList.toggle('active', lvl === 'OL'); document.getElementById('btnHL').classList.toggle('active', lvl === 'HL'); if(currentTopic && !isMockExam) updateQuestion(); }
function init() { const g = document.getElementById('topicGrid'); DATA.forEach((item) => { const b = document.createElement('button'); b.className = 'topic-btn'; b.innerText = item.title; b.onclick = () => { isMockExam = false; document.querySelectorAll('.topic-btn').forEach(x => x.classList.remove('active')); b.classList.add('active'); currentTopic = item; updateQuestion(); }; g.appendChild(b); }); }
function speakText() { const t = document.getElementById('qDisplay').innerText.replace(/\(PASADO\)|\(FUTURO\)/g, "").replace(/HL|OL/g, "").replace(/[0-9]\./g, ""); if ('speechSynthesis' in window) { window.speechSynthesis.cancel(); const u = new SpeechSynthesisUtterance(t); u.lang = 'es-ES'; u.rate = 0.9; window.speechSynthesis.speak(u); } }

function startMockExam() {
  isMockExam = true; document.querySelectorAll('.topic-btn').forEach(x => x.classList.remove('active'));
  let i = [...Array(DATA.length).keys()].sort(() => Math.random() - 0.5);
  document.getElementById('exerciseArea').style.display = 'block'; document.getElementById('result').style.display = 'none';
  document.getElementById('qDisplay').innerHTML = `<strong>Mock Exam:</strong><br>1. ${DATA[i[0]][currentLevel]}<br>2. ${DATA[i[1]][currentLevel]}<br>3. ${DATA[i[2]][currentLevel]}<br>4. ${PAST_QUESTIONS[currentLevel][Math.floor(Math.random()*3)]} (PAST)<br>5. ${FUTURE_QUESTIONS[currentLevel][Math.floor(Math.random()*3)]} (FUTURE/COND)`;
  document.getElementById('userInput').value = "";
}

function updateQuestion() { document.getElementById('exerciseArea').style.display = 'block'; document.getElementById('result').style.display = 'none'; document.getElementById('qDisplay').innerHTML = currentTopic[currentLevel]; }
function resetApp() { document.getElementById('result').style.display = 'none'; document.getElementById('exerciseArea').style.display = 'block'; }

async function analyze() {
  const t = document.getElementById('userInput').value; if(t.length < 5) return alert("Escribe m√°s...");
  const b = document.getElementById('btnAction'); b.disabled = true; b.innerText = "Grading...";
  try {
    const r = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-flash-latest:generateContent?key=${API_KEY}`, {
      method: 'POST', headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ contents: [{ parts: [{ text: "Examen Oral LC. Level: " + currentLevel + ". Ignore punctuation/accents. Feedback Bilingual JSON: {score, feedback_es, feedback_en, errors: [{original, correction, explanation_en}]} Answer: " + t }] }] })
    });
    const d = await r.json(); const j = JSON.parse(d.candidates[0].content.parts[0].text.replace(/```json|```/g, "").trim());
    document.getElementById('exerciseArea').style.display = 'none'; document.getElementById('result').style.display = 'block';
    document.getElementById('userResponseText').innerText = t;
    const s = document.getElementById('scoreDisplay'); s.innerText = `Score: ${j.score}%`; s.style.color = j.score >= 85 ? "#166534" : "#991b1b";
    document.getElementById('fbES').innerText = "üá™üá∏ " + j.feedback_es; document.getElementById('fbEN').innerText = "üá¨üáß " + j.feedback_en;
    const l = document.getElementById('errorsList'); l.innerHTML = "";
    j.errors.forEach(e => { l.innerHTML += `<div class="error-item"><span style="text-decoration: line-through;">${e.original}</span> ‚û°Ô∏è <b>${e.correction}</b><span class="eng-note">${e.explanation_en}</span></div>`; });
  } catch (e) { alert("Error"); } finally { b.disabled = false; b.innerText = "‚ú® Evaluate Answer"; }
}
init();
</script>
</body>
</html>
